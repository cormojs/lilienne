<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Lilienne</title>
  <link href="../build/main.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
</head>

<body>
  <div id="lilienne">
    <form @submit.prevent="register">
      <input v-model.trim="hostInput" placeholder="example.com"></input>
      <input type="submit" value="App登録"></input>
    </form>
    <a v-if="authUrl" :href="authUrl">{{ authUrl }}</a>
    <form @submit.prevent="addAccount">
      <input v-model.trim="authCode" placeholder="input code"></input>
      <input type="submit" value="アカウント登録"></input>
    </form>
    <div>
      <button @click="saveConfig">Save Config</button>
    </div>
    <div id="source-add">
      <form @submit.prevent="addSource(selectedConnection, selectedAPI, selectedFilters)" v-if="showAddColumn">
        <select id="accountSelector" v-model="selectedConnection">
          <option disabled value="">Select your account</option>
          <option v-for="(pair, token, i) in app.fetchedAccounts"
            :key="i" :value="{ token: token, host: pair.host }">{{ '@' + pair.account.username + '@' + pair.host }}</option>
        </select>
        <select v-model="selectedAPI">
          <option disabled value="">Select API</option>
          <option v-for="(api, name, i) in app.config.allApi" :key="i" :value="api">{{ name }}</option>
        </select>
        <input type="submit" value="ソースを追加" />
      </form>
    </div>
    <div id="column-add">
      <form @submit.prevent="addColumn(columnNameInput, selectedSource, selectedFilter)">
        <div>
          <template v-for="(source, i) in app.config.sources">
            <input type="radio" :id="i" :value="source" v-model="selectedSource">
            <label :for="i">{{ source.name }}</label>
          </template>
        </div>
        <template v-for="(filter, name) in app.config.filters">
          <input type="radio" :id="name" :value="filter" v-model="selectedFilter">
          <label :for="name">{{ name }}</label>
        </template>
        <div>

        </div>
        <input v-model="columnNameInput" placeholder="column title" />
        <input type="submit" value="カラムを追加" />
      </form>
    </div>
    <div id="columns">
      <column v-for="(column, i) in columns" :key="i" :column="column">
      </column>
    </div>
  </div>
  <script src="../build/build.js"></script>
</body>

</html>